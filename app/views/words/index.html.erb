<h1>
  Words
  <% if admin? %>  <!-- logged in as HAL -->
    <%= link_to 'New Word', new_word_path, class: "btn btn-primary btn-sm" %>
    <%= link_to 'Export (FIXME)', new_word_path, class: "btn btn-primary btn-sm" %>
  <% end %>
</h1>

<p id="notice"><%= notice %></p>

<% @words.all.group_by_character.each_pair do |letter, entries| %>
  <% next unless entries.present? %>
  <h1><%= letter %></h1>
  <hr>
  <div class="row">
    <% entries.each do |word| %>
      <div class='col-md-4'>
        <% icon_path_data = index_action_path_data(word, current_user) %>

        <% if icon_path_data.present? %>
          <% path = icon_path_data[:icon_path] %>
          <% method = icon_path_data[:icon_method] %>

          <% if path.present? %>
            <%# One live to avoid undercore issue %>
            <%= link_to send(path, word), method: method do %><img src="/icons/<%= word.status %>.png" width=16 height=16 title="status is <%= word.status %>" class="mx-2"><% end %>
          <% else %>
            <img src="/icons/<%= word.status %>.png" width=16 height=16 title="status is <%= word.status %>" class="mx-2">
          <% end %>
        <% else %>
          <img src="/icons/<%= word.status %>.png" width=16 height=16 title="status is <%= word.status %>" class="mx-2">
        <% end %>

        <% if icon_path_data&.dig(:link_path).present? %>
          <%= link_to word.word, send(icon_path_data.dig(:link_path), word), style: "text-decoration: none", title: "Owner: #{word&.user&.name || "unclaimed"}" %>
        <% else %>
          <span title="Owner: #{word&.user&.name || "unclaimed"}"><%= word.word %></span>
        <% end %>
      </div>
    <% end %>
  </div>
  <br>
<% end %>
<br>
